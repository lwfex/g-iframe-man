{"version":3,"sources":["webpack:///webpack/bootstrap 9cd25370de5afa5b50e6","webpack:///./index.js","webpack:///./src/main.js","webpack:///./src/css/main.less","webpack:///./src/main.html"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;ACtCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,EAAC,I;;;;;;;;;AClBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,6CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,G;;;;;;;;;ACjKA,0C;;;;;;;;;ACAA,6jB","file":"g-iframe-man.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9cd25370de5afa5b50e6","/**\r\n * Created by laiyq@txtws.com on 2016/11/3.\r\n */\r\nrequire('./src/css/main.less');\r\n(function () {\r\n    var scriptArr = document.getElementsByTagName(\"script\");\r\n    var curScript = scriptArr[scriptArr.length - 1];\r\n    if (curScript.src.match(/g-iframe-man/)) {\r\n        //独立使用\r\n        var exportName = $(curScript).attr('exports');\r\n        if (!exportName) {\r\n            console.error('please use as: <script src=\"[g-iframe-man url]\" exports=\"[the name you want]\"></script>');\r\n            return;\r\n        }\r\n        window[exportName] = require('./src/main.js');\r\n    } else {\r\n        module.exports = require('./src/main.js');\r\n    }\r\n})();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./index.js\n// module id = 0\n// module chunks = 0","/**\r\n * Created by laiyq@txtws.com on 2016/11/3.\r\n */\r\nmodule.exports = function (options) {\r\n    var __idMap = {};\r\n    var _this = this;\r\n    _this.options = {\r\n        $container: null\r\n    };\r\n    $.extend(true, _this.options, options);\r\n\r\n    var tpl = require('raw!./main.html');\r\n    _this.$html = $(tpl).appendTo(_this.options.$container);\r\n    _this.$tabContainer = _this.$html.find('.gim-tab-container');\r\n    _this.$windowContainer = _this.$html.find('.gim-windows');\r\n\r\n    //打开窗口\r\n    _this.open = function (target) {\r\n        var $item = null;\r\n        //隐藏\r\n        _this.$tabContainer.children().removeClass(\"active\");\r\n        _this.$windowContainer.children().removeClass('active');\r\n        if (__idMap[target.url]) {\r\n            var id = __idMap[target.url];\r\n            $item = _this.$tabContainer.children().filter('[data-id=\"' + id + '\"]').addClass(\"active\");\r\n            _this.$windowContainer.children().filter('[data-id=\"' + id + '\"]').addClass(\"active\");\r\n        } else {\r\n            var title = target.title;\r\n            var url = target.url;\r\n            var index = 'f' + (new Date()).getTime();\r\n            __idMap[url] = index;\r\n            //新增tab\r\n            $item = $('<a href=\"javascript:;\" class=\"active\" data-id=\"' + index + '\">' + title + ' <i class=\"fa fa-times-circle\"></i></a>');\r\n            _this.$tabContainer.append($item);\r\n            var n = '<iframe class=\"active\" name=\"iframe' + index + '\" width=\"100%\" height=\"100%\" src=\"' + url + '\" frameborder=\"0\" data-id=\"' + index + '\" seamless></iframe>';\r\n            _this.$windowContainer.append(n);\r\n        }\r\n        //是否显示上下切换按钮\r\n        _this.whetherShowTabRoll($item);\r\n    };\r\n\r\n    //关闭窗口\r\n    _this.close = function (url) {\r\n        var id = __idMap[url];\r\n        if (id) {\r\n            var $item = _this.$tabContainer.children('a[data-id=\"' + id + '\"]');\r\n            if ($item.length) {\r\n                _this.closeByTab($item);\r\n            }\r\n            delete __idMap[url];\r\n        }\r\n    };\r\n\r\n    _this.closeByTab = function ($item) {\r\n        var id = $item.data('id');\r\n        var $frame = _this.$windowContainer.children('iframe[data-id=\"' + id + '\"]');\r\n        var url = $frame.attr('src');\r\n        if ($item.prev().length) {\r\n            var prevId = $item.prev().data('id');\r\n            if ($item.is('.active')) {\r\n                $item.prev().addClass('active');\r\n                _this.$windowContainer.children('iframe[data-id=\"' + prevId + '\"]').addClass('active');\r\n            }\r\n        } else if ($item.next().length) {\r\n            var nextId = $item.next().data('id');\r\n            if ($item.is('.active')) {\r\n                $item.next().addClass('active');\r\n                _this.$windowContainer.children('iframe[data-id=\"' + nextId + '\"]').addClass('active');\r\n            }\r\n        }\r\n        $item.remove();\r\n        $frame.remove();\r\n        //是否隐藏上下切换按钮\r\n        _this.whetherHideTabRoll(_this.$tabContainer.find('.active'));\r\n        delete __idMap[url];\r\n    };\r\n\r\n    //是否显示上下切换按钮\r\n    _this.whetherShowTabRoll = function ($item) {\r\n        //是否显示切换按钮\r\n        var $tabRoll = _this.$html.find('.gim-tab-roll');\r\n        if (!$tabRoll.is(':visible')) {\r\n            if (_this.$tabContainer.height() > 40) {\r\n                $tabRoll.show();\r\n                resizeTabBarWidth();\r\n            }\r\n        }\r\n        //自动定位tab页\r\n        if ($item && $item.length) {\r\n            _this.$tabContainer.css(\"margin-top\", -($item.position().top) || 0);\r\n        }\r\n    };\r\n\r\n    //是否隐藏上下切换按钮\r\n    _this.whetherHideTabRoll = function ($item) {\r\n        //是否隐藏切换按钮\r\n        var $tabRoll = _this.$html.find('.gim-tab-roll');\r\n        if ($tabRoll.is(':visible')) {\r\n            if (_this.$tabContainer.height() == 40) {\r\n                $tabRoll.hide();\r\n                resizeTabBarWidth();\r\n            }\r\n        }\r\n        if ($item && $item.length) {\r\n            //自动定位tab页\r\n            _this.$tabContainer.css(\"margin-top\", -($item.position().top) || 0);\r\n        }\r\n    };\r\n\r\n    //重置标签栏的宽度\r\n    function resizeTabBarWidth() {\r\n        _this.$tabContainer.css('padding-right', _this.$html.find('.gim-tool-bar-right').width());\r\n    }\r\n\r\n    //点击激活\r\n    _this.$html.on('click', '.gim-tab-container>a:not(\".active\")', function () {\r\n        var $item = $(this);\r\n        _this.$tabContainer.children().removeClass('active');\r\n        _this.$windowContainer.children().removeClass('active');\r\n        $item.addClass('active');\r\n        _this.$windowContainer.children('iframe[data-id=\"' + $item.data('id') + '\"]').addClass('active');\r\n    });\r\n\r\n    //点击关闭窗口\r\n    _this.$html.on('click', '.gim-tab-container>a>i', function () {\r\n        _this.closeByTab($(this).parent());\r\n        return false;\r\n    });\r\n\r\n    //显示上一个任务栏\r\n    _this.$html.on('click', '.gim-prev', function () {\r\n        var old = _this.$tabContainer.css(\"margin-top\").replace(/^(-?\\d+).*$/, '$1');\r\n        old = 40 + parseInt(old);\r\n        _this.$tabContainer.css(\"margin-top\", old > 0 ? 0 : old);\r\n    });\r\n\r\n    //显示下一个任务栏\r\n    _this.$html.on('click', '.gim-next', function () {\r\n        var old = _this.$tabContainer.css(\"margin-top\").replace(/^(-?\\d+).*$/, '$1');\r\n        old = -40 + parseInt(old);\r\n        var min = 40 - _this.$tabContainer.height();\r\n        _this.$tabContainer.css(\"margin-top\", old < min ? min : old);\r\n    });\r\n\r\n    //点击刷新当前页面\r\n    _this.$html.on('click', '.gim-btn-refresh', function () {\r\n        var $frame = _this.$windowContainer.find('iframe.active');\r\n        if ($frame.length) {\r\n            $frame.attr('src', $frame.attr('src'));\r\n        }\r\n    });\r\n\r\n    //窗口大小变化时\r\n    $(window).on('resize', function () {\r\n        _this.whetherShowTabRoll(_this.$tabContainer.find('.active'));\r\n        _this.whetherHideTabRoll(_this.$tabContainer.find('.active'));\r\n    });\r\n\r\n    _this.show = function () {\r\n        resizeTabBarWidth();\r\n    }\r\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.js\n// module id = 1\n// module chunks = 0","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/css/main.less\n// module id = 2\n// module chunks = 0","module.exports = \"<div class=\\\"g-iframe-man\\\">\\r\\n    <div class=\\\"gim-tab-bar\\\">\\r\\n        <div class=\\\"gim-tab-container\\\"></div>\\r\\n        <div class=\\\"gim-tool-bar-right\\\">\\r\\n            <div class=\\\"gim-tab-roll\\\">\\r\\n                <i class=\\\"gim-prev fa fa-angle-up\\\"></i>\\r\\n                <i class=\\\"gim-next fa fa-angle-down\\\"></i>\\r\\n            </div>\\r\\n            <div class=\\\"gim-btn-refresh\\\">\\r\\n                <i class=\\\"fa fa-refresh\\\"></i>\\r\\n            </div>\\r\\n        </div>\\r\\n    </div>\\r\\n    <div class=\\\"gim-windows\\\"></div>\\r\\n</div>\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/raw-loader!./src/main.html\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}